class SendModuleDataRemoveObject{constructor(e){this.method=e,this.moduleParameters={nameFile:generateUUID(),modelImproved:!1,useRemoveText:!1,reverseSelect:!1,cropField:[],SAM:[]},this.sourceFile={nameFile:null,urlFile:null,formatFile:null,fileSizeBytes:null,naturalWidth:null,naturalHeight:null,offsetWidth:null,offsetHeight:null,startTime:null,endTime:null}}}const callbacks={fetchSendModuleDataCallback:fetchSendModuleDataRemoveObject,toggleModificationCallback:toggleModificationRemoveObject,setMetaButtonCallback:setMetaButtonRemoveObject,setMotionButtonCallback:null,setParametersButtonCallback:setParametersButtonRemoveObject,setModuleImgButtonsCallback:setModuleImgButtons,setModuleVideoButtonsCallback:setModuleVideoButtons,setDefaultSendModuleData:SendModuleDataRemoveObject};let sendModuleData=new SendModuleDataRemoveObject(moduleName),useRemoveText=!1;async function fetchSendModuleDataRemoveObject(){var e=function(){if(!0===useRemoveText){if(!Array.isArray(sendModuleData.moduleParameters.cropField))return console.log("SAM is not array"),{tmpFileName:!1,validMessage:"Oopsie! Seems like you didn't pick an text field in your content. Click on the «Select text» button and choose any field from the media, please!"};if(0===sendModuleData.moduleParameters.cropField.length)return console.log("Crop field is empty"),{tmpFileName:!1,validMessage:"Oopsie! Seems like you didn't pick an text field in your content. Click on the «Select text» button and choose any field from the media, please!"}}else{if(!Array.isArray(sendModuleData.moduleParameters.SAM))return console.log("SAM is not array"),{tmpFileName:!1,validMessage:"Oopsie! Seems like you didn't pick an object in your content. Click on the «Select object» button and choose any object from the media, please!"};if(0===sendModuleData.moduleParameters.SAM.length)return console.log("SAM is empty"),{tmpFileName:!1,validMessage:"Oopsie! Seems like you didn't pick an object in your content. Click on the «Select object» button and choose any object from the media, please!"}}return""===sendModuleData.moduleParameters.nameFile.trim()&&(sendModuleData.moduleParameters.nameFile=generateUUID()),"number"!=typeof sendModuleData.sourceFile.offsetWidth||isNaN(sendModuleData.sourceFile.offsetWidth)?(console.log("Offset width is not a number or is empty"),{tmpFileName:!1,validMessage:"Uh-oh! The width looks wonky. Double-check it's a number and not empty. Maybe click on «Select object» or load another file."}):"number"!=typeof sendModuleData.sourceFile.offsetHeight||isNaN(sendModuleData.sourceFile.offsetHeight)?(console.log("Offset height is not a number or is empty"),{tmpFileName:!1,validMessage:"Hmm... The height seems fishy. Verify it's a number and not empty. Check it's a number and not empty. Maybe click on «Select object» or load another file."}):(sendModuleData.moduleParameters.useRemoveText=useRemoveText,["jpg","jpeg","png","gif","bmp"].includes(sendModuleData.sourceFile.formatFile.toLowerCase())?{tmpFileName:generateImageFilename(),validMessage:""}:["mp4","avi","mov","wmv","mkv"].includes(sendModuleData.sourceFile.formatFile.toLowerCase())?{tmpFileName:generateVideoFilename(),validMessage:""}:(console.log("The format file is neither an image nor a video format."),{tmpFileName:!1,validMessage:"Yikes! Looks like an alien format. Stick to images or videos for now."}))}(),t=e.tmpFileName,e=e.validMessage;if(!1===t)return{statusBool:!1,validMessage:e};sendModuleData.sourceFile.nameFile=t;let a=sendModuleData.sourceFile.urlFile;return(a="string"==typeof a?await urlToBlob(a):a)?(console.log("download file"),await uploadChunkFile(a,t),sendModuleData.sourceFile.urlFile=null,console.log(JSON.stringify(sendModuleData,null,4)),await postModuleTaskEvent(sendModuleData),sendModuleData.sourceFile.urlFile=a,{statusBool:!0,validMessage:e}):{statusBool:!1,validMessage:e}}function toggleModificationRemoveObject(e){var t=e.querySelector(".footer-toggle-icon"),a=e.querySelector(".footer-toggle-name"),o=e.querySelector(".footer-toggle-title"),e=e.querySelector(".sr-only");t.innerHTML='<svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 9C8.25 8.58579 8.58579 8.25 9 8.25H15C15.4142 8.25 15.75 8.58579 15.75 9C15.75 9.41421 15.4142 9.75 15 9.75H12.75V15C12.75 15.4142 12.4142 15.75 12 15.75C11.5858 15.75 11.25 15.4142 11.25 15V9.75H9C8.58579 9.75 8.25 9.41421 8.25 9Z" fill="white"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.85986 3.26307C5.56645 2.5232 4.84432 2 4 2C2.89543 2 2 2.89543 2 4C2 4.84433 2.5232 5.56645 3.26307 5.85986C3.25449 5.90526 3.25 5.9521 3.25 6L3.25 18C3.25 18.0479 3.25449 18.0947 3.26307 18.1401C2.5232 18.4335 2 19.1557 2 20C2 21.1046 2.89543 22 4 22C4.84433 22 5.56645 21.4768 5.85986 20.7369C5.90526 20.7455 5.9521 20.75 6 20.75H18C18.0479 20.75 18.0947 20.7455 18.1401 20.7369C18.4335 21.4768 19.1557 22 20 22C21.1046 22 22 21.1046 22 20C22 19.1557 21.4768 18.4335 20.7369 18.1401C20.7455 18.0947 20.75 18.0479 20.75 18L20.75 6C20.75 5.9521 20.7455 5.90526 20.7369 5.85986C21.4768 5.56645 22 4.84433 22 4C22 2.89543 21.1046 2 20 2C19.1557 2 18.4335 2.5232 18.1401 3.26307C18.0947 3.25449 18.0479 3.25 18 3.25H6C5.9521 3.25 5.90526 3.25449 5.85986 3.26307ZM4.73693 5.85986C4.74551 5.90526 4.75 5.9521 4.75 6L4.75 18C4.75 18.0479 4.74551 18.0947 4.73693 18.1401C5.24875 18.3431 5.65689 18.7512 5.85986 19.2631C5.90526 19.2545 5.9521 19.25 6 19.25H18C18.0479 19.25 18.0947 19.2545 18.1401 19.2631C18.3431 18.7512 18.7512 18.3431 19.2631 18.1401C19.2545 18.0947 19.25 18.0479 19.25 18V6C19.25 5.9521 19.2545 5.90526 19.2631 5.85986C18.7512 5.65689 18.3431 5.24875 18.1401 4.73693C18.0947 4.74551 18.0479 4.75 18 4.75H6C5.9521 4.75 5.90526 4.74551 5.85986 4.73693C5.65689 5.24875 5.24875 5.65689 4.73693 5.85986Z" fill="white"/></svg>',a.textContent="Indicate text",o.textContent="Enable text indication to highlight selected areas while removing text instead of objects from your chosen field.",e.onchange=function(){toggleLogical(this),useRemoveText=!useRemoveText;var e=document.querySelector(".sam-button"),t=document.querySelector(".text-button");e&&t&&(useRemoveText&&Array.isArray(sendModuleData.moduleParameters.cropField)?(t.classList.remove("stroke-danger-primary","text-danger-primary","stroke-accent-primary","text-accent-primary","stroke-light-primary","text-light-primary"),e.classList.remove("stroke-danger-primary","text-danger-primary","stroke-accent-primary","text-accent-primary"),e.classList.add("stroke-light-primary","text-light-primary"),e.disabled=!0,t.disabled=!1,0===sendModuleData.moduleParameters.cropField.length?t.classList.add("stroke-danger-primary","text-danger-primary"):t.classList.add("stroke-accent-primary","text-accent-primary")):!useRemoveText&&Array.isArray(sendModuleData.moduleParameters.SAM)&&(e.classList.remove("stroke-danger-primary","text-danger-primary","stroke-accent-primary","text-accent-primary","stroke-light-primary","text-light-primary"),t.classList.remove("stroke-danger-primary","text-danger-primary","stroke-accent-primary","text-accent-primary"),t.classList.add("stroke-light-primary","text-light-primary"),e.disabled=!1,t.disabled=!0,0===sendModuleData.moduleParameters.SAM.length?e.classList.add("stroke-danger-primary","text-danger-primary"):e.classList.add("stroke-accent-primary","text-accent-primary")))}}function setMetaButtonRemoveObject(){var e=document.querySelector(".footer-parameters").querySelector("div"),t=(e.innerHTML="",document.createElement("div")),a=(t.classList.add("flex","gap-3","items-center","justify-between"),document.createElement("p"));a.classList.add("font-extra-thick"),a.textContent="Filename";const o=document.createElement("input");o.classList.add("px-2","py-1.5","rounded-md","bg-dark-elements","w-32","box-content","text-center","outline-none"),o.type="text",o.value=sendModuleData.moduleParameters.nameFile,o.disabled=!1;var r=document.createElement("div"),l=(r.classList.add("flex","gap-3","items-center","justify-between"),document.createElement("p"));l.classList.add("font-extra-thick"),l.textContent="Resized to";const n=document.createElement("input");n.classList.add("px-2","py-1.5","rounded-md","bg-dark-elements","w-32","box-content","text-center","outline-none"),n.type="text",n.value="1280x720",n.disabled=!0,getLimitResolution(moduleName).then(e=>{var t=sendModuleData.sourceFile.naturalWidth,a=sendModuleData.sourceFile.naturalHeight,e=setLimitResolution(e,t,a);n.value=e.newWidth+"x"+e.newHeight}).catch(e=>{}),o.addEventListener("input",function(e){var t=e.target.value;/^[a-zA-Z0-9-]*$/.test(t)||(e.target.value=t.slice(0,-1)),sendModuleData.moduleParameters.nameFile=o.value}),t.appendChild(a),t.appendChild(o),r.appendChild(l),r.appendChild(n),e.appendChild(t),e.appendChild(r)}function setMotionButtonRemoveObject(){var e=document.querySelector(".footer-parameters").querySelector("div"),t=(e.innerHTML="",document.createElement("div")),a=(t.classList.add("flex","gap-1.5","items-center"),document.createElement("p"));a.classList.add("flex-1","basis-1/3"),a.textContent="Improved level";const o=document.createElement("button");o.classList.add("rounded-md","flex","items-center","justify-center","transition-colors","font-normal","disabled:cursor-not-allowed","px-2.5","gap-2","py-2.5","basis-1/3","flex-1","!bg-dark-elements","hover:bg-dark-elements-hover","text-light-primary","bg-dark-elements"),sendModuleData.moduleParameters.modelImproved&&(o.classList.add("!bg-accent-primary","!text-dark-background"),o.classList.remove("!bg-dark-elements")),o.innerHTML='<i class="fa-solid fa-thumbs-up"></i>',o.type="button";var r=document.createElement("span"),l=(r.classList.add("w-full","h-px","bg-white","bg-opacity-20","shrink-0"),document.createElement("button"));l.classList.add("text-light-primary","opacity-60","hover:opacity-100","transition-opacity","-mt-2"),l.textContent="Reset",l.type="button",(async()=>{try{!0===(await getAccess()).useCpu&&(o.disabled=!0)}catch(e){console.error("Error in synchronous context:",e)}})(),o.onclick=function(){o.classList.contains("!bg-dark-elements")?(o.classList.add("!bg-accent-primary","!text-dark-background"),o.classList.remove("!bg-dark-elements"),sendModuleData.moduleParameters.modelImproved=!0):(o.classList.remove("!bg-accent-primary","!text-dark-background"),o.classList.add("!bg-dark-elements"),sendModuleData.moduleParameters.modelImproved=!1)},l.onclick=function(){o.classList.remove("!bg-accent-primary","!text-dark-background"),o.classList.add("!bg-dark-elements"),sendModuleData.moduleParameters.modelImproved=!1},t.appendChild(a),t.appendChild(o),e.appendChild(t),e.appendChild(r),e.appendChild(l)}function setParametersButtonRemoveObject(){var e=document.querySelector(".footer-parameters").querySelector("div"),t=(e.innerHTML="",document.createElement("div")),a=(t.classList.add("flex","gap-1.5","items-center"),document.createElement("p"));a.classList.add("flex-1","basis-1/3"),a.textContent="Reverse select";const o=document.createElement("button");o.classList.add("rounded-md","flex","items-center","justify-center","transition-colors","font-normal","disabled:cursor-not-allowed","px-2.5","gap-2","py-2.5","basis-1/3","flex-1","!bg-dark-elements","hover:bg-dark-elements-hover","text-light-primary","bg-dark-elements"),sendModuleData.moduleParameters.reverseSelect&&(o.classList.add("!bg-accent-primary","!text-dark-background"),o.classList.remove("!bg-dark-elements")),o.innerHTML='<i class="fa-solid fa-thumbs-up"></i>',o.type="button",o.onclick=function(){o.classList.contains("!bg-dark-elements")?(o.classList.add("!bg-accent-primary","!text-dark-background"),o.classList.remove("!bg-dark-elements"),sendModuleData.moduleParameters.reverseSelect=!0):(o.classList.remove("!bg-accent-primary","!text-dark-background"),o.classList.add("!bg-dark-elements"),sendModuleData.moduleParameters.reverseSelect=!1)};var r=document.createElement("span"),l=(r.classList.add("w-full","h-px","bg-white","bg-opacity-20","shrink-0"),document.createElement("button"));l.classList.add("text-light-primary","opacity-60","hover:opacity-100","transition-opacity","-mt-2"),l.textContent="Reset",l.type="button",l.onclick=function(){o.classList.remove("!bg-accent-primary","!text-dark-background"),o.classList.add("!bg-dark-elements"),sendModuleData.moduleParameters.reverseSelect=!1},t.appendChild(a),t.appendChild(o),e.appendChild(t),e.appendChild(r),e.appendChild(l)}function setModuleImgButtons(){var e=[],t=setButtonSelectSourceSAM(),a=setButtonSelectSourceText();return e.push(t,a),e}function setModuleVideoButtons(){var e=[],t=setButtonSelectSourceSAM(),a=setButtonSelectSourceText();return e.push(t,a),e}function setButtonSelectSourceSAM(){var e=document.createElement("div"),t=(e.classList.add("relative","group"),document.createElement("div")),a=(t.classList.add("hidden","absolute","p-2","group-hover:flex","items-center","gap-3","bottom-full","left-1/2","-translate-x-1/2","-translate-y-3.5","bg-dark-elements-hover","rounded-md","w-[300px]"),document.createElement("img")),o=(a.classList.add("w-20","h-20","rounded-md"),a.src="/static/modules/thumbnail/select_object.png",a.alt="Segment object",a.width=256,a.height=256,document.createElement("span")),r=(o.classList.add("text-m-mobile","lg:text-m"),o.style="display: inline-block; vertical-align: top; text-decoration: inherit; text-wrap: balance;",o.textContent="Let the neural network handle it, then click to include with the right, exclude with the left. Don't forget to switch brushes.",document.createElement("div")),l=(r.classList.add("relative","flex","gap-2","items-center","rounded-md","bg-light-emphasis"),r.style.stroke="white",document.createElement("button")),n=(l.classList.add("sam-button","stroke-danger-primary","text-danger-primary","relative","flex","gap-2","items-center","group","py-1.5","pl-2","whitespace-nowrap","font-extra-thick","pr-2"),l.type="button",l.innerHTML='<i class="fa-solid fa-object-group transition-[stroke,opacity] opacity-60 group-hover:opacity-100"></i>',document.createElement("span"));return n.textContent="Select object",useRemoveText&&(l.classList.remove("stroke-danger-primary","text-danger-primary","stroke-accent-primary","text-accent-primary"),l.classList.add("stroke-light-primary","text-light-primary"),l.disabled=!0),l.onclick=function(){var e=document.querySelector(".footer-preview");e&&("img"===e.tagName.toLowerCase()&&e.src?createModalSAMImage(sendModuleData.sourceFile.urlFile,this,null):"video"===e.tagName.toLowerCase()&&e.src&&createModalSAMVideo(sendModuleData.sourceFile.urlFile,this,null))},l.appendChild(n),t.appendChild(a),t.appendChild(o),r.appendChild(l),e.appendChild(t),e.appendChild(r),e}function setButtonSelectSourceText(){var e=document.createElement("div"),t=(e.classList.add("relative","group"),document.createElement("div")),a=(t.classList.add("hidden","absolute","p-2","group-hover:flex","items-center","gap-3","bottom-full","left-1/2","-translate-x-1/2","-translate-y-3.5","bg-dark-elements-hover","rounded-md","w-[300px]"),document.createElement("img")),o=(a.classList.add("w-20","h-20","rounded-md"),a.src="/static/modules/thumbnail/select_text.png",a.alt="Select text",a.width=256,a.height=256,document.createElement("span")),r=(o.classList.add("text-m-mobile","lg:text-m"),o.style="display: inline-block; vertical-align: top; text-decoration: inherit; text-wrap: balance;",o.textContent="Text bothering you? Just draw a box around it. But the text outside the frame will remain. Easy as pie!",document.createElement("div")),l=(r.classList.add("relative","flex","gap-2","items-center","rounded-md","bg-light-emphasis"),r.style.stroke="white",document.createElement("button")),n=(l.classList.add("text-button","stroke-danger-primary","text-danger-primary","relative","flex","gap-2","items-center","group","py-1.5","pl-2","whitespace-nowrap","font-extra-thick","pr-2"),l.type="button",l.innerHTML='<svg class="transition-[stroke,opacity] opacity-60 group-hover:opacity-100" width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.25 9C8.25 8.58579 8.58579 8.25 9 8.25H15C15.4142 8.25 15.75 8.58579 15.75 9C15.75 9.41421 15.4142 9.75 15 9.75H12.75V15C12.75 15.4142 12.4142 15.75 12 15.75C11.5858 15.75 11.25 15.4142 11.25 15V9.75H9C8.58579 9.75 8.25 9.41421 8.25 9Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M5.85986 3.26307C5.56645 2.5232 4.84432 2 4 2C2.89543 2 2 2.89543 2 4C2 4.84433 2.5232 5.56645 3.26307 5.85986C3.25449 5.90526 3.25 5.9521 3.25 6L3.25 18C3.25 18.0479 3.25449 18.0947 3.26307 18.1401C2.5232 18.4335 2 19.1557 2 20C2 21.1046 2.89543 22 4 22C4.84433 22 5.56645 21.4768 5.85986 20.7369C5.90526 20.7455 5.9521 20.75 6 20.75H18C18.0479 20.75 18.0947 20.7455 18.1401 20.7369C18.4335 21.4768 19.1557 22 20 22C21.1046 22 22 21.1046 22 20C22 19.1557 21.4768 18.4335 20.7369 18.1401C20.7455 18.0947 20.75 18.0479 20.75 18L20.75 6C20.75 5.9521 20.7455 5.90526 20.7369 5.85986C21.4768 5.56645 22 4.84433 22 4C22 2.89543 21.1046 2 20 2C19.1557 2 18.4335 2.5232 18.1401 3.26307C18.0947 3.25449 18.0479 3.25 18 3.25H6C5.9521 3.25 5.90526 3.25449 5.85986 3.26307ZM4.73693 5.85986C4.74551 5.90526 4.75 5.9521 4.75 6L4.75 18C4.75 18.0479 4.74551 18.0947 4.73693 18.1401C5.24875 18.3431 5.65689 18.7512 5.85986 19.2631C5.90526 19.2545 5.9521 19.25 6 19.25H18C18.0479 19.25 18.0947 19.2545 18.1401 19.2631C18.3431 18.7512 18.7512 18.3431 19.2631 18.1401C19.2545 18.0947 19.25 18.0479 19.25 18V6C19.25 5.9521 19.2545 5.90526 19.2631 5.85986C18.7512 5.65689 18.3431 5.24875 18.1401 4.73693C18.0947 4.74551 18.0479 4.75 18 4.75H6C5.9521 4.75 5.90526 4.74551 5.85986 4.73693C5.65689 5.24875 5.24875 5.65689 4.73693 5.85986Z"></path></svg>',document.createElement("span"));return n.textContent="Select text",useRemoveText||(l.classList.remove("stroke-danger-primary","text-danger-primary","stroke-accent-primary","text-accent-primary"),l.classList.add("stroke-light-primary","text-light-primary"),l.disabled=!0),l.onclick=function(){var e=document.querySelector(".footer-preview");e&&("img"===e.tagName.toLowerCase()&&e.src?createModalCropperImage(sendModuleData.sourceFile.urlFile,this,null):"video"===e.tagName.toLowerCase()&&e.src&&createModalCropperVideo(sendModuleData.sourceFile.urlFile,this,null))},l.appendChild(n),t.appendChild(a),t.appendChild(o),r.appendChild(l),e.appendChild(t),e.appendChild(r),e}createFooterVideoOrImage(callbacks);